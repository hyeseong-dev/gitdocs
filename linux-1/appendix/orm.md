# ORM

#### **ORM이란?**

데이터베이스와 객체 지향 프로그래밍 언어간의 호환되지 않는 데이터를 변환하는 프로그램이 기법이다. 객체 관계 매핑이라고 한다. 객체 지향 언어에서 사용할 수 있는 '가상' 객체 데이터베이스를 구축하는 방법이다. 

SQLAlchemy는 Python을 위한 ORM\(Object-relational mapping\) 중에 하나이다. 프로젝트에 ORM을 적용하는 이유는 DBMS의 테이블을 하나의 객체로 보고 객체간의 관계를 프로그래밍 언어로 풀어난다는 점이다.

#### **ORM의 장점과 단점\(Pros and cons\)**

**장점\(pros\)** 

ORM을 사용하게 되면 SQL 질의어를 쓰지 않고, 프로그래밍 언어\(python, Java, JS\)로 객체\(테이블\)간의 관계를 풀어낼 수 있다. 개발자는 좀더 직관적으로 객체간의 관계를 파악할 수 있으며 비즈니스 로직에 집중할 수 있다. 만약 다른 DBMS를 이전해야 한다면, Raw SQL Query를 사용했을때는 굉장히 많은 부분을 변경해야 하지만, ORM을 사용해 개발하였다면 개발자는 비교적 적은 리스크만을 감당하면 된다. 개인적으로 DB 테이블간의 구조가 Python 코드로 명시되어 있다보니 필요할 때 구조를 빠르게 파악할 수 있어서 좋았다. \(객체 지향 패러다임에 익숙한 개발자라면 바로 이해할 수 있도록, 아래 실제 Studi 의 코드 조각을 추가해두었으니 보면 무슨 의미인지 이해가 갈 것이다.\)

- 개발자가 객체 지향적인 코드로 인해 더 직관적이고 비지니스 로직에 집중할 수 있다. 

*  SQL 선언문, 할당, 종료와 같은 부수적인 코드가 없거나 급격히 줄어든다.
* 각종 객체에 대한 코드를 별도로 작성하기 때문에 코드의 가독성을 올려준다.
* SQL의 절차적이고 순차적인 접근이 아닌 객체 지향적인 접근으로 인해 생산성이 증가한다.

- 재사용 및 유지보수의 편리성이 증가한다.

* ORM은 독립적으로 작성되어 있고, 해당 객체들을 재활용할 수 있다.
* 매핑 정보가 명확하여, ERD를 보는 것에 대한 의존도를 낮출 수 있다.

- DBMS에 대한 종속성이 줄어든다.

* 대부분 ORM 솔루션은 DB에 종속적이지 않다.
* 종속적이지 않다는 것은 구현 방법 뿐만 아니라 많은 솔루션에서 자료형 타입까지 유효하다
* 개발자는 Object에 집중함으로써 극단적으로 DBMS를 교체하는 거대한 작업에도 비교적 적은 리스크와 시간이 소요된다.

**단점 \(cons\)**

Node.js 프로젝트에서 Sequelize를 사용해 프로젝트를 진행했던 때에 여러 테이블 간 JOIN을 해야만 했다. ORM을 사용한 코드보다 Raw SQL Query문이 더 빨리 요청을 처리한 경우가 있었다. \(그때는 내가 ORM을 제대로 활용 못했던 가능성이 크다. 그렇게 크게 와닿는 속도 차이라면 실무 프로젝트에서 ORM을 절대 적용하진 않을테니\) 이 포스팅을 하기 위해 ORM에 관련해서 쓴 다른 분들의 글을 읽어보았는데, 나도 아직 깊이 있게 ORM을 사용해보지 않다보니 단점은 와닿지는 않았다. 그래서 나중을 위해 기록만 해두도록 하겠다.

- 완벽한 ORM 으로만 서비스를 구현하기가 어렵다.

* 사용하기는 편하지만 설게는 매우 신중하게 해야 한다.
* 프로젝트의 복잡성이 커질 경우 난이도 또한 올라갈 수 있다.
* 잘못 구현된 경우에 속도가 저하되고 심각할 경우에는 일관성이 무너지는 문제점이 생길 수 있다.
* 일부 자주 사용되는 대형 쿼리는 속도를 위해 SP를 쓰는 등 별도의 튜닝이 필요한 경우가 있다.
* DBMS의 고유 기능을 이용하기 어렵다

- 프로시저가 많은 시스템에선 ORM의 객체 지향적인 장점을 활용하기 어렵다.

